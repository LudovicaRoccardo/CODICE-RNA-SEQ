CODICE RNA-SEQ  CROMOSOMA 22


Mi collego alla macchina virtuale cliccando sul link email container RStudio 
Inserisci     utente: gitpod 
              password: rstudio 

Clicca su Open a folder to start

Cancella quello che mi esce scritto sulla barra in alto e scrivi sulla barra in alto:

/home/gitpod/ se voglio rimanere nell’interfaccia generale

/home/gitpod/datiesame se voglio entrare direttamente in dati esame


(LAVORO SUL TERMINALE di R )

1) pwd → home/gitpod/

2) mkdir -p analysis

3) cd analysis

4) mkdir -p rawdata

5) cd rawdata

6) spacchetto i file dell’esercizio con il comando: tar -xvzf data_rnaseq.tar.gz -C .  
   
    (metto il punto dopo C , perchè gli sto dicendo di spacchettare i file dove mi trovo, 
     ossia in rawdata. Se mi trovassi in analysis, ma volevo spacchettare in rawdata 
     allora: tar -xvzf data_rnaseq.tar.gz -C rawdata/ )

7) ls -l  (controllo se in rawdata sono stati caricati i files fasta)

8) digito sul terminale : salmon

SE mi dovesse dare errore : export PATH=${PATH}:/opt/conda/bin

POI digito di nuovo salmon


Pathway da copiare nel loop nell’ INDEX: 

/home/gitpod/datiesame/reference_chr22/transcriptome/chr22_transcripts_index


9)  RESTO IN RAWDATA ( perchè è li che ci sono i file che mi servono per il loop del comando successivo) 

for sample in `ls *_1.fasta.gz`
do
index="/home/gitpod/datiesame/reference_chr22/transcriptome/chr22_transcripts_index"
name=${sample%_1.fasta.gz}
echo "quantifying $name"
salmon quant \
 -p 2 \
 -i $index \
 -l IU \
 -1 "${name}_1.fasta.gz" -2 "${name}_2.fasta.gz" \
 --validateMappings \
 -o "${name}.quant"
echo -e "$name done now\n"
done

NB: Se mi trovo nella cartella analysis quando lancio il loop, allora non sono nella cartella dove io ho i file che mi servono per il loop, quindi quando lancio il comando il path della prima parte del comando sarà:

for sample in `ls rawdata/*_1.fasta.gz`

(verifico che su rawdata, per tutti i campioni, ho il file sample.quant, ci clicco e dovrei avere il file quant.sf (su logs invece mi dice che errori ho se non ho questi files come dovrei) 


(ORA PASSO ALLA CONSOLE)

1) COPIO E INCOLLO SU CONSOLE QUESTI PACCHETTI:

library(DESeq2)
library(tximport)
library(tidyverse)
library(pheatmap)
library(clusterProfiler)
library(DOSE)
library(org.Hs.eg.db)

2) setwd("/home/gitpod/analysis")

dataset <- tibble(
  sample = c("sample_01",
             "sample_02",
             "sample_03",
             "sample_04",
             "sample_05",
             "sample_06"),
  condition = c(rep("control", 3),
                rep("case", 3))
)









